<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Automated Battery Manufacturing | Alberto Mussali</title> <meta name="author" content="Alberto Mussali"> <meta name="description" content="Collaborating with Corvus Energy, this year-long project sought to completely automate a pneumatic press station integral to battery module manufacturing"> <meta name="keywords" content="portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%A9%95&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://albertomussali.com/projects/AutomatedBatteryMfg/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <script src="/assets/js/distillpub/overrides.js"></script> </head> <body class="fixed-top-nav"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Alberto </span>Mussali</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">ME</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">PROJECTS</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">PUBLICATIONS</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-article> <h1 id="automating-pneumatic-press-operation-for-battery-module-manufacturing">Automating Pneumatic Press Operation for Battery Module Manufacturing</h1> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-1 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/Proj_BatteryMfg/corvus-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/Proj_BatteryMfg/corvus-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/Proj_BatteryMfg/corvus-1400.webp"></source> <img src="/assets/img/Proj_BatteryMfg/corvus.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption">Image Credits: Corvus Energy</div> <h1 id="introduction">Introduction</h1> <h2 id="the-project">The Project</h2> <p>This project report is the culmination of a year-long capstone project in collaboration with Corvus Energy. The goal of the project was to design the automation system for a pneumatic press station which sits at Corvus’s main manufacturing line in Richmond, B.C., Canada. Corvus Energy, founded in 2009, is a company whose main purpose is the manufacturing and sale of Energy Storage Systems (ESSs). Their main market focus relies in the maritime industry, which is directly impacted with regulatory compliance and emissions control in different geographical regions worldwide (Corvus Energy, 2022). According to Corvus (2022), “more than 90% of large commercial hybrid vessels utilize a Corvus Energy ESS”.</p> <p>An automation system was designed, costed, and proposed to the client. This system was designed to address all of the client’s needs and wants in regard to automatic processing of the battery modules.</p> <h1 id="system-characterization">System Characterization</h1> <p>Given that the project consists primarily of retrofitting the current capabilities at Corvus Energy, a preliminary characterization of the system was performed. This initial assessment allowed for a coherent understanding of the machinery available and its interconnections to the assembly line. Details pertaining to Corvus Energy’s manufacturing capabilities are left out of this article to protect it’s proprietary information.</p> <h1 id="value-proposition">Value Proposition</h1> <p>Immediately after the initial visit, the client’s needs became apparent. This section will explore the client’s needs, and how these would have to be addressed in a potential solution.</p> <h2 id="needs-assessment">Needs Assessment</h2> <p>To be successful, the proposed automation system would have to comply with certain needs. These were mainly discussed during the project’s kickoff meeting and established within the first few weeks of the project, alongside the client.</p> <p>The primary need identified was that of having a fully automatic system that could process modules with no human interaction. This functional need was the main driver of the project, and what the authors’ ultimate role in it was. The specifics of the implementation – how the goal was to be achieved – were left largely unspecified by the client, with some notable exceptions.</p> <h2 id="design-objectives">Design Objectives</h2> <p>With the needs and potential benefits in mind, the following design objective statement was defined.</p> <blockquote> <p>The press must be automated enough so that it can detect the presence of incoming modules, identify the state of said module and adapt to its required processing parameters. The system should be able to vary the pressure and time setpoints to those requested by the MES, while defaulting to pre-retrofit values if unspecified. The press station should be designed in such a way that it maximizes operator safety, and productivity, while minimizing capital costs.</p> </blockquote> <h1 id="proposed-solution">Proposed Solution</h1> <p>Knowing the client needs, requirements, and performance criteria, a solution could be crafted.</p> <p>There are three key components in this system: A Programmable Logic Controller (PLC), a Communications Gateway (CG), and the Press Station (PS, press). All three elements are essential to both manual and automatic operation of the press. These components are connected as per the following figure.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/Proj_BatteryMfg/overview_solution-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/Proj_BatteryMfg/overview_solution-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/Proj_BatteryMfg/overview_solution-1400.webp"></source> <img src="/assets/img/Proj_BatteryMfg/overview_solution.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Solution Overview" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption">Overview of system components in preferred solution.</div> <h2 id="functional-decomposition">Functional Decomposition</h2> <p>Functional decomposition can be performed on the components to better understand how each addresses different aspects of the automation system. The following list summarizes the roles and responsibilities of each of the above devices.</p> <ul> <li>PLC <em>(Programmable Logic Controller)</em> <ul> <li>Control actuators that interface with the press station. o Monitor press station parameters.</li> <li>Monitor processing parameters while pressing a module o Monitor status of safety components</li> </ul> </li> <li>CG <em>(Communications Gateway)</em> <ul> <li>Poll status of PLC’s inputs and state.</li> <li>Liaise between the MES and the PLC</li> <li>Poll processing parameters for an incoming module</li> <li>Instruct the PLC when and how to process an incoming module. o Maintain a heartbeat with the PLC</li> </ul> </li> <li>MES <em>(Manufacturing Execution System)</em> <ul> <li>Provide processing parameters to the CG</li> <li>Record alarms</li> <li>Record actual processing parameters</li> </ul> </li> </ul> <p>In summary, the PLC handles all the physical sensors and actuators which are directly connected to the press, as well as low-level logic regarding these. The CG handles the high-level logic of the system, relaying information to and from the MES and PLC, ensuring that the processing parameters for each module are met. The MES acts as the source of the ideal processing parameters, as well as a historian for alarms and actual processing parameters.</p> <h1 id="system-development">System Development</h1> <p>As alluded to in the preceding section the proposed solution to Corvus’s desired automation system is a multi-faceted multidomain approach. This section will explore the technical details surrounding this solution. The software-level details of the implementation are described subsequently. Concerns regarding hardware selection are left out of this article.</p> <h2 id="network-topology">Network Topology</h2> <p>The implemented system uses both digital, discrete, and analog signals for communications. All digital communications use Ethernet as the physical layer (CAT 5e and 6). The CG and MES communicate via TCP, while the CG and PLC communicate via MODBUS TCP. Additionally, the PLC uses Analog 4-20mA signals to control the piston valves, and discrete 0/24VDC signals to monitor the light curtains and E-stop button.</p> <p>The following diagram (Fig. 14) illustrates the network architecture for the implemented system, as well as the self-assigned IP addresses of the respective devices. The switch is an unmanaged 5-port switch from AutomationDirect (model SE2-SW5U) and forwards all the messages within the subnetwork to the correct recipient regardless of protocol. It is powered with 24VDC via an external PSU.</p> <p>The PLC and CG both have self-assigned static IP addresses within the Press Station Subnetwork 172.16.16.0/24 (/24 indicates a subnet mask of 255.255.255.0). As such, these devices can communicate with each other without a router. The subnetwork is private in nature, due to its adherence to the RFC 1918 standard. Cybersecurity concerns outside of this network, such as routing from other networks or the internet, were not considered as part of the project’s scope.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/Proj_BatteryMfg/network-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/Proj_BatteryMfg/network-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/Proj_BatteryMfg/network-1400.webp"></source> <img src="/assets/img/Proj_BatteryMfg/network.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Network architecture and addresses" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption">Network architecture and addresses.</div> <h2 id="software">Software</h2> <p>There are two distinct yet coupled domains to the automation system’s software implementations. The first of these is that which pertains to the CG, while the other pertains to the PLC. As briefly mentioned in previous sections, the CG handles all the compatibility aspects that arise when attempting to connect a PLC to the Manufacturing Execution System (MES). On the other hand, the PLC handles the physical sensing and actuation as relevant to the pressing of modules. Both devices work together to address the client’s performance requirements.</p> <p>The entirety of the software developed for the CG was written and tested on Python 3.8. The CG, which is a Raspberry Pi Model 4b single board computer, was prepackaged with Ubuntu Server 20.04.4 LTS (Focal Fossa). This version of Ubuntu Server is lightweight, enterprise-ready, and will be supported through hardware and maintenance updates until 2025, and with extended security maintenance until 2030.</p> <h2 id="communications-gateway">Communications Gateway</h2> <p>The main role of the CG is to mediate between the PLC and MES. To be performant in this role, the CG had to monitor the PLC and MES continuously and independently. The CG was programmed as a multi-threaded application. This allows the CG to execute tasks in a concurrent and non-blocking manner.</p> <p>Concurrency thus plays a large role in the automation system and proves advantageous given the large amount of external read/write operations performed on the PLC and MES. Three threads were defined to handle specific tasks in the automation system, they are summarized in the following table.</p> <p>The CG can communicate with the PLC since they both implement the MODBUS TCP communications protocol. This protocol, which is standard for several automation ventures worldwide, uses Ethernet/IP as the physical layer and TCP as the transport-layer protocol of the OSI (Open Systems Interconnection Model).</p> <p>Throughout this section, the <code class="language-plaintext highlighter-rouge">foo</code> formatting style is used to denominate code elements such as variable names, types, and packages. Additionally, this section uses the PEP 484 type hint naming convention, where <code class="language-plaintext highlighter-rouge">foo:bar</code> indicates <code class="language-plaintext highlighter-rouge">name:type</code>.</p> <table> <thead> <tr> <th>Thread Name</th> <th>Role</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">th_PLC_heartbeat</code></td> <td>Monitors the status of PLC-CG communications and updates threads when first set.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">th_PLC_brain</code></td> <td>Handles all PLC IO-bound operations and data extraction.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">th_MES_brain</code></td> <td>Handles all MES IO-bound operations and data logging.</td> </tr> </tbody> </table> <div class="caption">Threads and their roles in the Communications Gateway.</div> <h2 id="heartbeat-algorithm">Heartbeat Algorithm</h2> <p>A heartbeat algorithm was implemented into the CG in order to assess the status of the PLC ↔ CG communications. An independent thread on the CG programming attempts a read and write operation from and to the PLC every 5 seconds. If at least one of the read/write operations fails, the CG notifies the other threads in order to take action. The status of the connection keeps on being monitored every 5 seconds in order to detected potential reconnections of the communications channel.</p> <h2 id="pressstationpy"><em>PressStation.py</em></h2> <p>This file fully defines all details and aspects of the press station as a python class. It implements methods such as <code class="language-plaintext highlighter-rouge">start_pressing()</code> and <code class="language-plaintext highlighter-rouge">stop_pressing()</code> which commence or stop pressing, respectively. Additionally, it provides methods to update processing parameters on the press itself. An important feature of this class is that any object of type <code class="language-plaintext highlighter-rouge">PressStation</code> (e.g., myPress:PressStation) can be fully serialized into persistent storage. This allows constant backups to be taken which include the press’s latest parameters and state. This was achieved by developing this class, as well as some helper elements to it, in a manner that is compatible with Python’s <code class="language-plaintext highlighter-rouge">pickle</code> module. Backup features were not implemented at this stage.</p> <h2 id="plccommspy">PLCComms.py</h2> <p>This file implements all methods which are pertinent to CG &lt;–&gt; PLC communication. It includes the previously defined heartbeat algorithm, as well as the <code class="language-plaintext highlighter-rouge">plc_get()</code> and <code class="language-plaintext highlighter-rouge">plc_set()</code> methods. These two methods allow for I/O operations on the PLC, and use an open source <code class="language-plaintext highlighter-rouge">clickplc</code> package, which relies on <code class="language-plaintext highlighter-rouge">pymodbus</code> and <code class="language-plaintext highlighter-rouge">asyncio</code> as its main dependencies. A few modifications were made to make the methods implemented in this package thread safe via the heartbeat algorithm.</p> <h2 id="dependencies">Dependencies</h2> <p>The implemented software relies on several dependencies. All dependencies are open source and available for commercial use, released under GNU General Public License v2.0, or similar; allowing for modification, redistribution, and commercial use of the software. The following figure shows the dependency diagram for the implemented software.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/Proj_BatteryMfg/dependency-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/Proj_BatteryMfg/dependency-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/Proj_BatteryMfg/dependency-1400.webp"></source> <img src="/assets/img/Proj_BatteryMfg/dependency.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Network architecture and addresses" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption">CG Software dependency diagram.</div> <h1 id="prototyping">Prototyping</h1> <p>A prototype was developed to test the accuracy and validity of the proposed automation system. This prototype included hardware and software components to it and attempted to include as much of the elements developed for Corvus.</p> <p>In terms of hardware, a test panel – constructed from a recycled computer case – was built, which included some of the main elements in the automation system. Some key elements were omitted from testing, such as the load cells and linear transducers since these are fixed on- site and currently in use by Corvus. The following figure shows the test panel.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/Proj_BatteryMfg/prototype-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/Proj_BatteryMfg/prototype-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/Proj_BatteryMfg/prototype-1400.webp"></source> <img src="/assets/img/Proj_BatteryMfg/prototype.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Network architecture and addresses" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption">Prototype: front and back views.</div> <p>A main regulator set to \(50\ psi\) is attached to the back of the panel. This regulator serves as the main feed point for incoming compressed air (or nitrogen). Immediately following the regulator is a shutoff valve, which was added to provide a way to isolate the pneumatic system for safety. This was important given that the prototype is set to be presented at a public-facing event during UBC’s Applied Science Design &amp; Innovation Day.</p> <p>To mimic the press station, two pistons were added to the system, each having their own set of valves for extension and retraction, as well as an independent regulator. The regulators were fixed to \(25\ psi\) for compatibility with the selection of valves and pistons. An important departure from the real press station is the fact that two valves are available for piston position control in the prototype. The real-world counterpart to the prototype has a single valve per piston, given that its retraction is gravity driven.</p> <p>In terms of software, a simple, hardcoded demo was added to the CG to simulate typical commands from the MES. This code would simply generate a random number as the pressing duration and send the command to the PLC for actual engagement of the pistons. The prototype was mounted on a recycled steel base which was spray-painted black for aesthetic purposes. The main regulator and shutoff valve were positioned at the back of the panel for added safety in case of failure.</p> <h1 id="client-deliverables">Client Deliverables</h1> <p>Given the scope of the project, the core of the end deliverables was in the form of documentation and specifications regarding the developed automation system. This section will provide an overview of all the deliverables which were offered to the client at the culmination of this project.</p> <h2 id="operations-philosophy">Operations Philosophy</h2> <p>The operations philosophy document, which contains the approaches to control and strategies as designed, was delivered to the client. This document was reviewed and approved by the client before the project’s culmination and contains the client’s final requested changes.</p> <h2 id="controls-narrative">Controls Narrative</h2> <p>The controls narrative serves as the main software level specification of the project. It contains the core of the technical depth in terms of software and control, as well as the complete design specification of the press station’s automation subnetwork.</p> <h2 id="control-panel-and-loop-drawings">Control Panel and Loop Drawings</h2> <p>A collection of control panel, loop, and network diagrams was developed and delivered to the client. The control panel diagrams include the full assembly and wiring specification of all the elements in the control panel. The loop drawings include all the field elements which are necessary to the press’s automated operation as well as their wiring.</p> <h2 id="mfmea">MFMEA</h2> <p>A Machine Failure Mode and Effects Analysis was delivered to the client as the main form of risk assessment of the project.</p> <h1 id="conclusion">Conclusion</h1> <p>After a year-long project in collaboration with Corvus Energy, the design of an automated system for the operation of a pneumatic press was achieved. The automation system was designed and implemented across two main control devices, a Communications Gateway, and a Programmable Logic Controller. Each of these two devices was in charge of a particular aspect of the automation system, with the CG handling all high-level processing logic, and the PLC handling sensing and actuation in the press.</p> <p>All relevant hardware in the system was costed and itemized in a Bill of Materials. Additionally, the hardware layout and wiring were specified in a set of technical drawings which included both the in-panel and field elements. An Operations Philosophy and Controls Narrative were developed in order to define the approaches and strategies of the automation system and how they were achieved in practice. Finally, a risk assessment in the form of a Machine Failure Mode and Effects Analysis was carried out to identify and minimize the risks undertaken with this project.</p> <p>A prototype which incorporated the most important elements of the project was developed as the culmination the project. It exhibited the relevant control and field elements, as well as the software required to make the system operable in harmony.</p> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Alberto Mussali. Last updated: September 28, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>